<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<title>html5本地存储封装函数示例</title>
	<style>
	*{margin:0;padding:0;font-size:18px;margin-bottom: 10px;}
	body {padding:50px;}
	input{display: block;}
	input[type="button"]{height:30px;line-height: 30px;padding:0 10px;background-color: #fff;color:#000;border:1px solid #ccc;border-radius: 6px;cursor:pointer;}
	input[type="text"]{height:36px;line-height: 36px;padding:0 10px;border:1px solid #ccc;}
	label{display:block;}
	div{color:red;border-top:1px solid #ccc;padding-top:10px;}
	</style>
</head>
<body>
	<input id="store" type="text" placeholder="输入需要存储的内容" />
	<input id="saveData" type="button" value="存储" />
	<input id="removeData" type="button" value="删除存储" />
	<input id="clearData" type="button" value="清空本地存储" />
	<input id="getData" type="button" value="获取存储的值" />
	<label>获取本地存储（localStorage）存储的值为：</label>
	<div id="show"></div>
</body>
<script>
	/*
		函数：存储指定名字的数据
		n:存储的数据key值（存储数据的名字）
		d:存储的数据
	*/
	function setStroageValue(n,d){
		try{
	        if(window.localStorage){
	        	localStorage.removeItem(n);
	            //存储关键字
	            localStorage.setItem(n,JSON.stringify(d));
	        }else{
	            console.log('您的浏览器不支持localStorage！');
	        }
	    }catch(oException){
	        if(oException.name == 'QuotaExceededError'){
	            console.log('超出本地存储限额！');
	            //如果历史信息不重要了，可清空后再设置
	            //localStorage.clear();
	        }
	    }
	}
	/*
		函数：获取指定名字的本地存储
		n:存储的数据key值（存储数据的名字）
	*/
	function getStorageValue(n){
		try{
	        if(window.localStorage){
	            var _data = localStorage.getItem(n);

	            if(_data != null){
	            	return JSON.parse(_data);
	            }else{
	            	return null;
	            }

	        }else{
	            console.log('您的浏览器不支持localStorage！');
	        }
	    }catch(oException){
	        if(oException.name == 'QuotaExceededError'){
	            console.log('超出本地存储限额！');
	            //如果历史信息不重要了，可清空后再设置
	            //localStorage.clear();
	        }
	    }
	}
	/*
		函数：删除指定名字的本地存储
		n:存储的数据key值（存储数据的名字）
	*/
	function removeStorageValue(n){
		try{
	        if(window.localStorage){

	        	localStorage.removeItem(n);

	        }else{
	            console.log('您的浏览器不支持localStorage！');
	        }
	    }catch(oException){
	        if(oException.name == 'QuotaExceededError'){
	            console.log('超出本地存储限额！');
	            //如果历史信息不重要了，可清空后再设置
	            //localStorage.clear();
	        }
	    }
	}
	/*
		函数：清空本地存储
	*/
	function clearStorageValue(){
		try{
	        if(window.localStorage){
	        	localStorage.clear();
	        }else{
	            console.log('您的浏览器不支持localStorage！');
	        }
	    }catch(oException){
	        if(oException.name == 'QuotaExceededError'){
	            console.log('超出本地存储限额！');
	            //如果历史信息不重要了，可清空后再设置
	            //localStorage.clear();
	        }
	    }
	}

</script>
<script>
	//举例
	//测试对象等数据
	var _test = {
		name:"勇哥",
		age:24,
		love:"妹子",
		like:[
			"游泳",
			"打球",
			"吹牛"
		]
	}


	var _data = document.getElementById('store');
	var _saveBtn = document.getElementById('saveData');
	var _removeBtn = document.getElementById('removeData');
	var _clearBtn = document.getElementById('clearData');
	var _getBtn = document.getElementById('getData');
	var _show = document.getElementById('show');

	//存储
	_saveBtn.onclick = function(){
		setStroageValue('testData',_data.value);
		setStroageValue('test',_test);
		alert('操作成功！');
	}
	//获取
	_getBtn.onclick = function(){
		_show.innerHTML = getStorageValue('testData')+"<br/>"+getStorageValue('test').like[2];
		alert('操作成功！');
	}
	//删除
	_removeBtn.onclick = function(){
		removeStorageValue('testData');
		alert('操作成功！');
	}
	_clearBtn.onclick = function(){
		clearStorageValue();
		alert('操作成功！');
	}

</script>
</html>